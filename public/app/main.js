(()=>{"use strict";var t,n="http://localhost:3000/api/",e=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},r=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},o=function(){function t(){}return t.getBoards=function(){return e(this,void 0,void 0,(function(){return r(this,(function(t){return[2,fetch("".concat(n,"boards")).then((function(t){return t.json()}))]}))}))},t.getBoard=function(t){return e(this,void 0,void 0,(function(){return r(this,(function(e){return[2,fetch("".concat(n,"boards/").concat(t)).then((function(t){return t.json()}))]}))}))},t.createBoard=function(t){return e(this,void 0,void 0,(function(){return r(this,(function(e){return[2,fetch("".concat(n,"boards"),{method:"POST",headers:{"Content-Type":"application/json"},body:'{"name": "'.concat(t,'"}')}).then((function(t){return t.json()}))]}))}))},t.updateBoard=function(t){return e(this,void 0,void 0,(function(){return r(this,(function(e){return[2,fetch("".concat(n,"boards/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()}))]}))}))},t.setSlot=function(t,o){return e(this,void 0,void 0,(function(){return r(this,(function(e){return[2,fetch("".concat(n,"boards/").concat(t,"/slots/").concat(o.slotId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){return t.json()}))]}))}))},t}();function i(t,n){window.dispatchEvent(new CustomEvent(t,{detail:n}))}function a(t,n){window.addEventListener(t,(function(t){n(t)}))}!function(t){t.BOARD_SELECTED="board_selected",t.BOARD_ADDED="board_added",t.BOARD_UPDATED="board_updated"}(t||(t={}));var c,s,u=function(){return u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},u.apply(this,arguments)},l=function(){function t(){this.components=[]}return t.prototype.init=function(){return t=this,n=void 0,r=function(){var t,n;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(e){for(t=0,n=this.components;t<n.length;t++)n[t].init();return[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},t}(),f=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},p=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},d=function(){function t(){}return t.getButtons=function(){return f(this,void 0,void 0,(function(){return p(this,(function(t){return[2,fetch("".concat(n,"buttons")).then((function(t){return t.json()}))]}))}))},t.getButton=function(t){return f(this,void 0,void 0,(function(){return p(this,(function(e){return[2,fetch("".concat(n,"buttons/").concat(t)).then((function(t){return t.json()}))]}))}))},t.createButton=function(t){return f(this,void 0,void 0,(function(){return p(this,(function(e){return[2,fetch("".concat(n,"buttons"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()}))]}))}))},t.updateButton=function(t){return f(this,void 0,void 0,(function(){return p(this,(function(e){return[2,fetch("".concat(n,"buttons/").concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(t){return t.json()}))]}))}))},t.deleteButton=function(t){return f(this,void 0,void 0,(function(){return p(this,(function(e){return[2,fetch("".concat(n,"buttons/").concat(t),{method:"DELETE"}).then((function(t){return t.json()}))]}))}))},t}();!function(t){t.BUTTON_ADDED="button_added",t.BUTTON_REMOVED="button_removed"}(c||(c={})),function(t){t.SLOT_SETTED="slot_setted",t.SLOT_MOVED="slot_moved"}(s||(s={}));var h,b=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},m=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},y=function(){function t(){}return t.getCommandsData=function(){return b(this,void 0,void 0,(function(){return m(this,(function(e){return t.commandsData?[2,Promise.resolve(t.commandsData)]:[2,fetch("".concat(n,"commands")).then((function(t){return t.json()})).then((function(n){return t.commandsData=n,t.commandsData}))]}))}))},t.getCommandData=function(t){return b(this,void 0,void 0,(function(){return m(this,(function(e){return[2,fetch("".concat(n,"commands/").concat(t,"/data")).then((function(t){return t.json()}))]}))}))},t}(),v=function(){function t(){}return t.color=function(n){void 0===n&&(n=!1);for(var e=[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"],r="#",o=n?8:6,i=0;i<o;i++)r+=e[t.int(0,e.length)];return r},t.int=function(t,n){return Math.floor(Math.random()*(n-t))+t},t}(),_=new(function(){function t(){this.allowScape=!0,this.opened=!1,this.onClose=function(){},this.modal=document.querySelector(".modal"),this.content=document.querySelector(".modal__content"),this.close=document.querySelector(".modal__close"),this.title=document.querySelector(".modal__title"),this.body=document.querySelector(".modal__body"),this.footer=document.querySelector(".modal__footer")}return t.prototype.init=function(){return t=this,n=void 0,r=function(){var t=this;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(n){return this.close.addEventListener("click",(function(){return t.doClose(!0)})),window.addEventListener("click",(function(n){return t.verifyOutside(n)})),document.body.addEventListener("keyup",(function(n){return t.verifyEscape(n)})),[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},t.prototype.open=function(t){var n=t.title,e=t.body,r=t.footer,o=t.maxWidth,i=t.hideClose,a=t.disallowScape,c=t.withTabs,s=t.onClose;this.title.innerHTML=n||"",e?(this.body.style.display="block",this.body.innerHTML=e):this.body.style.display="none",this.footer.innerHTML=r||"",this.content.style.maxWidth=o||"",this.close.style.opacity=i?"0":"1",c&&this.initTabs(),this.onClose=s||function(){},this.allowScape=!a,this.show()},t.prototype.doClose=function(t){void 0===t&&(t=!1),this.opened=!1,this.modal.style.display="none",t&&this.onClose()},t.prototype.verifyOutside=function(t){this.opened&&this.allowScape&&t.target===this.modal&&this.doClose(!0)},t.prototype.verifyEscape=function(t){this.opened&&this.allowScape&&"Escape"===t.key&&this.doClose(!0)},t.prototype.show=function(){this.opened=!0,this.modal.style.display="block"},t.prototype.initTabs=function(){var t=this;document.querySelectorAll(".form__tab-title").forEach((function(n){return n.addEventListener("click",(function(){return t.changeTab(n.dataset.tab)}))})),this.changeTab(document.querySelector(".form__tab-title").dataset.tab)},t.prototype.changeTab=function(t){document.querySelectorAll(".form__tab-title").forEach((function(t){return t.classList.remove("form__tab-title_active")})),document.querySelectorAll(".form__tab").forEach((function(t){return t.classList.remove("form__tab_active")})),document.querySelector('.form__tab-title[data-tab="'.concat(t,'"]')).classList.add("form__tab-title_active"),document.querySelector('.form__tab[data-tab="'.concat(t,'"]')).classList.add("form__tab_active")},t}()),w=function(){function t(t,n){this.list=t,this.onUpdate=n,this.init()}return t.prototype.init=function(){var t=this;[].slice.call(this.list.children).forEach((function(t){t.draggable=!0})),this.list.addEventListener("dragstart",(function(n){t.dragEl=n.target,n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("Text",t.dragEl.textContent),t.list.addEventListener("dragover",(function(n){return t.onDragOver(n)}),!1),t.list.addEventListener("dragend",(function(n){return t.onDragEnd(n)}),!1),setTimeout((function(){t.dragEl.classList.add("sortable__ghost")}),0)}),!1)},t.prototype.onDragOver=function(t){t.preventDefault(),t.dataTransfer.dropEffect="move";var n=t.target;if(n&&n!==this.dragEl&&"DIV"==n.nodeName){var e=n.getBoundingClientRect(),r={x:t.pageX-e.left,y:t.pageY-e.top},o=(e.bottom-e.top)/2,i=n;r.y>o&&(i=n.nextSibling);try{this.list.insertBefore(this.dragEl,i)}catch(t){}}},t.prototype.onDragEnd=function(t){var n=this;t.preventDefault(),this.dragEl.classList.remove("sortable__ghost"),this.list.removeEventListener("dragover",(function(t){return n.onDragOver(t)}),!1),this.list.removeEventListener("dragend",(function(t){return n.onDragEnd(t)}),!1),this.onUpdate(this.dragEl)},t}(),g=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},S=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},E=function(){function t(t,n,e){void 0===n&&(n=""),void 0===e&&(e={}),this.commandsData=t,this.commandId=n,this.params=e,this.init()}return t.prototype.init=function(){return g(this,void 0,void 0,(function(){var t=this;return S(this,(function(n){return this._result=new Promise((function(n){return g(t,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return this.commandId?(this.command=this.commandsData.commands[this.commandId],[4,this.getParamsData()]):[3,2];case 1:t.sent(),t.label=2;case 2:return _.open({title:"Configurar Paso",body:this.printForm(),maxWidth:"440px",onClose:function(){return n(null)}}),this.form=document.querySelector("#command-configuration"),this.commandSelect=this.form.querySelector("#command_id"),this.paramsContainer=this.form.querySelector(".params"),this.registerEvents(n),[2]}}))}))})),[2]}))}))},Object.defineProperty(t.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),t.prototype.printForm=function(){return'<form id="command-configuration" class="form">\n    <p class="form__line form__line_flex">\n      <label class="form__label">Selecciona un atajo</label>\n      <select class="form__input form__input_flex" name="command_id" id="command_id">\n        <option value="">Seleccionar un commando</option>\n        '.concat(this.printCommands(),'\n      </select>\n    </p>\n    <div class="params">\n      ').concat(this.printParams(),'\n    </div>\n    <p class="form__line"><button class="form__submit">Guardar</button></p>\n  </form>')},t.prototype.registerEvents=function(t){var n=this;this.form.addEventListener("submit",(function(e){return n.onSubmit(e,t)})),this.commandSelect.addEventListener("change",(function(){return n.handleCommandChange()}))},t.prototype.onSubmit=function(t,n){t.preventDefault(),this.commandId?n({commandId:this.commandId,params:this.getParams()}):n(null),_.doClose()},t.prototype.printCommands=function(){var t=this;return Object.values(this.commandsData.commands).map((function(n){return'<option value="'.concat(n.id,'" ').concat(n.id===t.commandId?"selected":"",">").concat(n.name,"</option>")})).join("")},t.prototype.handleCommandChange=function(){var t;return g(this,void 0,void 0,(function(){return S(this,(function(n){switch(n.label){case 0:return this.commandId=this.commandSelect.value,this.command=this.commandsData.commands[this.commandId],this.params=(null===(t=this.command)||void 0===t?void 0:t.defaultParams)||{},[4,this.getParamsData()];case 1:return n.sent(),this.paramsContainer.innerHTML=this.printParams(),[2]}}))}))},t.prototype.getParamsData=function(){return g(this,void 0,void 0,(function(){var t,n;return S(this,(function(e){switch(e.label){case 0:return t=this,this.commandId?[4,y.getCommandData(this.commandId)]:[3,2];case 1:return n=e.sent(),[3,3];case 2:n=null,e.label=3;case 3:return t.data=n,[2]}}))}))},t.prototype.printParams=function(){var t,n,e=this;return(null===(n=null===(t=this.command)||void 0===t?void 0:t.params)||void 0===n?void 0:n.map((function(t){return e.printParam(t)})).join(""))||""},t.prototype.printParam=function(t){var n="";return n="select"===t.type?'<select\n        class="form__input form__input_flex"\n        name="param_'.concat(t.key,'"\n        id="param_').concat(t.key,'"\n        value="').concat(this.params[t.key],'"\n        placeholder="').concat(t.placeholder||t.label||"",'"\n      >\n        ').concat(this.printParamData(t),"\n      </select>"):'<input\n        class="form__input form__input_flex"\n        name="param_'.concat(t.key,'"\n        id="param_').concat(t.key,'"\n        type="').concat(t.type,'"\n        value="').concat(this.params[t.key],'"\n        placeholder="').concat(t.placeholder||t.label||"",'"\n      />'),'<p class="form__line form__line_flex">\n    <label class="form__label">'.concat(t.label,"</label>\n    ").concat(n,"\n  </p>")},t.prototype.getParams=function(){var t,n={};if(null===(t=this.command)||void 0===t?void 0:t.params)for(var e=0,r=this.command.params;e<r.length;e++){var o=r[e];n[o.key]=this.form["param_".concat(o.key)].value}return n},t.prototype.printParamData=function(t){var n=this;return(t.asyncLoadData?this.data[t.key]:t.data).map((function(e){return'<option value="'.concat(e.id,'" ').concat(n.params[t.key]===e.id?"selected":"",">").concat(e.name,"</option>")})).join("")},t}(),T=function(){return T=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},T.apply(this,arguments)},x=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},k=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},D=function(){function t(t){this.slot=t,this.init()}return t.prototype.init=function(){return x(this,void 0,void 0,(function(){var t,n=this;return k(this,(function(e){switch(e.label){case 0:return t=this,[4,y.getCommandsData()];case 1:return t.commandsData=e.sent(),_.open({title:"Configurar slot",body:this.printForm(),maxWidth:"360px",withTabs:!0}),this.form=document.querySelector("#slot-configuration"),this.registerEvents(),new w(this.form.querySelector(".steps"),(function(){return n.updateList()})),[2]}}))}))},t.prototype.printForm=function(){var t,n,e;return'<form id="slot-configuration" class="form">\n    <div class="form__tabs">\n      <div class="form__tab-title" data-tab="basic">Básico</div>\n      <div class="form__tab-title" data-tab="steps">Pasos</div>\n    </div>\n    <div class="form__tab" data-tab="basic">\n      <p class="form__line">\n        <input\n          class="form__input"\n          placeholder="Nombre del botón"\n          name="button_name"\n          value="'.concat((null===(t=this.slot.button)||void 0===t?void 0:t.name)||"",'"\n        />\n      </p>\n      <p class="form__line">\n        <input\n          class="form__input"\n          placeholder="Icono del botón"\n          name="button_icon"\n          value="').concat((null===(n=this.slot.button)||void 0===n?void 0:n.icon)||"",'"\n        />\n      </p>\n      <p class="form__line">\n        <input\n          type="color"\n          class="form__input form__input-color"\n          id="button_color"\n          name="button_color"\n          value="').concat((null===(e=this.slot.button)||void 0===e?void 0:e.color)||v.color(),'"\n        />\n      </p>\n    </div>\n    <div class="form__tab" data-tab="steps">\n      <div class="steps">\n        ').concat(this.printSteps(),'\n      </div>\n      <p class="form__line"><button type="button" class="form__button btn-add">Añadir</button></p>\n    </div>\n    <p class="form__line"><button class="form__submit">Guardar</button></p>\n  </form>')},t.prototype.registerEvents=function(){var t=this;this.form.addEventListener("submit",(function(n){return t.onSubmit(n)})),this.form.querySelector(".btn-add").addEventListener("click",(function(n){return t.handleAddStep(n)})),this.form.querySelectorAll(".step__btn").forEach((function(n){return n.addEventListener("click",(function(){return t.handleStepBtnClick(n)}))}))},t.prototype.onSubmit=function(t){var n;t.preventDefault(),this.slot.button={name:this.form.button_name.value,icon:this.form.button_icon.value,color:this.form.button_color.value,steps:(null===(n=this.slot.button)||void 0===n?void 0:n.steps)||[]},i(s.SLOT_SETTED,this.slot),_.doClose()},t.prototype.printSteps=function(){var t=this;return"EMPTY"===this.slot.state?"":this.slot.button.steps.map((function(n,e){return t.newStep(n,e)})).join("")},t.prototype.handleAddStep=function(t){return x(this,void 0,void 0,(function(){var n,e,r,o=this;return k(this,(function(i){switch(i.label){case 0:return t.preventDefault(),_.doClose(),[4,new E(this.commandsData).result];case 1:return(n=i.sent())&&n.commandId&&(e=document.createElement("div"),this.form.querySelector(".steps").append(e),r=this.form.querySelectorAll(".step").length,e.outerHTML=this.newStep(n,r),this.form.querySelectorAll('.step[data-step="'.concat(r,'"] .step__btn')).forEach((function(t){return t.addEventListener("click",(function(){return o.handleStepBtnClick(t)}))})),this.slot.button?this.slot.button.steps.push(n):(this.slot.state="FULL",this.slot.button={name:this.form.button_name.value,icon:this.form.button_icon.value,color:this.form.button_color.value,steps:[n]})),[4,this.init()];case 2:return i.sent(),_.changeTab("steps"),[2]}}))}))},t.prototype.newStep=function(t,n){var e;return'<div class="form__line step" data-step="'.concat(n,'" draggable="true">\n      <div class="step__name">').concat((null===(e=this.commandsData.commands[t.commandId])||void 0===e?void 0:e.name)||"Tablero específico",'</div>\n      <div class="step__actions">\n        <div class="step__btn step__btn_config">⚙</div>\n        <div class="step__btn step__btn_remove">🗑</div>\n      </div>\n    </div>')},t.prototype.handleStepBtnClick=function(t){switch(t.classList[1].split("_").reverse()[0]){case"config":this.handleStepConfig(t);break;case"remove":this.handleStepRemove(t)}},t.prototype.handleStepConfig=function(t){return x(this,void 0,void 0,(function(){var n,e,r,o;return k(this,(function(i){switch(i.label){case 0:return n=t.parentElement.parentElement,e=+n.dataset.step,r=this.slot.button.steps[e],[4,new E(this.commandsData,r.commandId||"",T({},r.params)||{}).result];case 1:return(o=i.sent())&&(r.commandId=o.commandId,r.params=o.params),[4,this.init()];case 2:return i.sent(),_.changeTab("steps"),[2]}}))}))},t.prototype.handleStepRemove=function(t){t.parentElement.parentElement.remove(),this.updateList()},t.prototype.updateList=function(){var t=this,n=[];this.form.querySelectorAll(".step").forEach((function(e){n.push(t.slot.button.steps[+e.dataset.step])})),this.slot.button.steps=n,this.form.querySelector(".steps").innerHTML=this.printSteps(),this.form.querySelectorAll(".step__btn").forEach((function(n){return n.addEventListener("click",(function(){return t.handleStepBtnClick(n)}))}))},t}(),O=function(){function t(){this.init()}return t.prototype.init=function(){return t=this,n=void 0,r=function(){var t=this;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(n){return this._result=new Promise((function(n){_.open({title:"Slot ocupado",body:t.printForm(),maxWidth:"360px",hideClose:!0,disallowScape:!0}),t.form=document.querySelector("#slot-full-alert"),t.form.addEventListener("submit",(function(e){return t.onSubmit(e,n)}))})),[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},t.prototype.printForm=function(){return'<form id="slot-full-alert" class="form">\n    <p class="form__line">¿Que deberíamos hacer?</p>\n    <p class="form__line"><button class="form__submit form__submit-btn_cancel">Cancelar</button></p>\n    <p class="form__line"><button class="form__submit form__submit-btn_replace">Reemplazar</button></p>\n    <p class="form__line"><button class="form__submit form__submit-btn_add">Añadir pasos a la macro</button></p>\n  </form>'},t.prototype.onSubmit=function(t,n){var e;if(t.preventDefault(),t.submitter.classList.length>1)switch(t.submitter.classList[1]){case"form__submit-btn_replace":e="replace";break;case"form__submit-btn_add":e="add";break;default:e="cancel"}n(e),_.doClose()},Object.defineProperty(t.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),t}(),P=function(){return P=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},P.apply(this,arguments)},C=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},L=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},B=function(){function t(t,n,e){this.el=t,this.parent=n,this.slot=e}return t.prototype.init=function(){return C(this,void 0,void 0,(function(){return L(this,(function(t){return this.el.draggable="EMPTY"!==this.slot.state,this.registerEvents(),[2]}))}))},t.prototype.registerEvents=function(){var t=this;this.el.addEventListener("dragover",(function(t){return t.preventDefault()})),this.el.addEventListener("drop",(function(n){return t.handleDrop(n)})),this.el.addEventListener("dragstart",(function(n){return t.handleDrag(n)})),this.el.querySelectorAll(".board__item-btn").forEach((function(n){return n.addEventListener("click",(function(){return t.handleBtnClick(n)}))}))},t.prototype.handleDrop=function(t){return C(this,void 0,void 0,(function(){var n,e,r,o;return L(this,(function(a){switch(a.label){case 0:return n=t.dataTransfer.getData("slotId"),e=JSON.parse(t.dataTransfer.getData("button")),n===this.slot.slotId?[3,3]:(r="replace","EMPTY"===this.slot.state?[3,2]:[4,(new O).result]);case 1:r=a.sent(),a.label=2;case 2:switch(r){case"replace":this.slot.button=e;break;case"add":(o=this.slot.button.steps).push.apply(o,e.steps),i(s.SLOT_SETTED,this.slot);break;default:return[2]}n?i(s.SLOT_MOVED,{updatedSlot:this.slot,emptySlot:{slotId:n,state:"EMPTY",button:null}}):i(s.SLOT_SETTED,this.slot),a.label=3;case 3:return[2]}}))}))},t.prototype.handleDrag=function(t){"EMPTY"!==this.slot.state&&(t.dataTransfer.setData("slotId",this.slot.slotId),t.dataTransfer.setData("button",JSON.stringify(P(P({},this.slot.button),{id:null}))))},t.prototype.handleBtnClick=function(t){switch(t.classList[1].split("_").reverse()[0]){case"add":this.handleAdd();break;case"save":this.handleSave();break;case"config":this.handleConfig();break;case"remove":this.handleRemove()}},t.prototype.handleAdd=function(){return C(this,void 0,void 0,(function(){return L(this,(function(t){return new D(this.slot),[2]}))}))},t.prototype.handleSave=function(){return C(this,void 0,void 0,(function(){return L(this,(function(t){switch(t.label){case 0:return[4,d.createButton(P(P({},this.slot.button),{id:""}))];case 1:return t.sent(),i(c.BUTTON_ADDED),[2]}}))}))},t.prototype.handleConfig=function(){new D(this.slot)},t.prototype.handleRemove=function(){this.slot.button=null,i(s.SLOT_SETTED,this.slot)},t}(),j=(h=function(t,n){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},h(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),A=function(t){function n(n){var e=t.call(this)||this;return e.board=n,e.boardElement=document.querySelector(".board"),e}return j(n,t),n.prototype.init=function(){return n=this,e=void 0,o=function(){var n,e=this;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(r){switch(r.label){case 0:return o=this.board,n=Object.entries(o.slots).map((function(t){return u(u({},t[1]),{slotId:t[0]})})),this.boardElement.querySelector(".board__container-wrapper").innerHTML=this.printSlots(n),this.boardElement.querySelectorAll(".board__item").forEach((function(t,r){e.components.push(new B(t,e.boardElement,n[r]))})),[4,t.prototype.init.call(this)];case 1:return r.sent(),[2]}var o}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(n,e||[])).next())}));var n,e,r,o},n.prototype.printSlots=function(t){var n=this;return t.map((function(t){return'<div class="board__item board__item_'.concat(t.state,'">\n  <div class="board__item-square" ').concat(n.slotBackground(t),'>\n    <div class="board__item-content" ').concat(n.slotBackground(t,"image"),">\n      ").concat(n.slotContent(t),'\n    </div>\n    <div class="board__item-actions">\n      ').concat(n.slotButtons(t),"\n    </div>\n  </div>\n</div>")})).join("")},n.prototype.slotBackground=function(t,n){return void 0===n&&(n="color"),"EMPTY"===t.state?"":"color"===n?'style="background-color: '.concat(t.button.color,';"'):"style=\"background-image: url('".concat(t.button.icon,"');\"")},n.prototype.slotContent=function(t){return"EMPTY"===t.state?"":'<span class="board__item-name">'.concat(t.button.name,"</span>")},n.prototype.slotButtons=function(t){return"EMPTY"===t.state?'<div class="board__item-btn board__item-btn_add">+</div>':'\n        <div class="board__item-btn board__item-btn_save">💾</div>\n        <div class="board__item-btn board__item-btn_config">⚙</div>\n        <div class="board__item-btn board__item-btn_remove">🗑</div>\n        '},n}(l),q=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},M=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},I=function(){function n(){}return n.prototype.init=function(){return q(this,void 0,void 0,(function(){var t=this;return M(this,(function(n){return this.wrapper=document.querySelector(".board-wrapper"),this.boardTitle=this.wrapper.querySelector(".app-grid__item-title"),this.registerEvents(),this.boardTitle.addEventListener("focusout",(function(){return t.handleNameChange()})),this.boardTitle.addEventListener("input",(function(n){return t.checkEnter(n)})),[2]}))}))},n.prototype.registerEvents=function(){var n=this;a(t.BOARD_SELECTED,(function(t){return n.handleBoardSelected(t.detail)})),a(s.SLOT_SETTED,(function(t){return n.handleSlotSetted(t.detail)})),a(s.SLOT_MOVED,(function(t){return n.handleSlotMoved(t.detail)}))},n.prototype.handleBoardSelected=function(t){return q(this,void 0,void 0,(function(){var n;return M(this,(function(e){switch(e.label){case 0:void 0===r&&(r="EMPTY_BOARD"),n={id:"EMPTY_BOARD",name:r,slots:{slot1:{state:"EMPTY"},slot2:{state:"EMPTY"},slot3:{state:"EMPTY"},slot4:{state:"EMPTY"},slot5:{state:"EMPTY"},slot6:{state:"EMPTY"},slot7:{state:"EMPTY"},slot8:{state:"EMPTY"},slot9:{state:"EMPTY"},slot10:{state:"EMPTY"},slot11:{state:"EMPTY"},slot12:{state:"EMPTY"},slot13:{state:"EMPTY"},slot14:{state:"EMPTY"},slot15:{state:"EMPTY"}}},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,o.getBoard(t.boardId)];case 2:return n=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return this.boardComponent=new A(n),this.wrapper.querySelector(".app-grid__item-title").innerHTML=n.name,[4,this.boardComponent.init()];case 5:return e.sent(),[2]}var r}))}))},n.prototype.handleNameChange=function(){return q(this,void 0,void 0,(function(){return M(this,(function(n){switch(n.label){case 0:if(this.boardComponent.board.name===this.boardTitle.textContent)return[3,4];this.boardComponent.board.name=this.boardTitle.textContent,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.updateBoard(this.boardComponent.board)];case 2:return n.sent(),i(t.BOARD_UPDATED),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))},n.prototype.handleSlotSetted=function(n){return q(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return[4,o.setSlot(this.boardComponent.board.id,n)];case 1:return e.sent(),i(t.BOARD_SELECTED,{boardId:this.boardComponent.board.id}),[2]}}))}))},n.prototype.handleSlotMoved=function(n){return q(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return[4,o.setSlot(this.boardComponent.board.id,n.updatedSlot)];case 1:return e.sent(),[4,o.setSlot(this.boardComponent.board.id,n.emptySlot)];case 2:return e.sent(),i(t.BOARD_SELECTED,{boardId:this.boardComponent.board.id}),[2]}}))}))},n.prototype.checkEnter=function(t){null===t.data&&(this.wrapper.querySelector(".app-grid__item-title div")&&this.wrapper.querySelector(".app-grid__item-title div").remove(),this.wrapper.querySelector(".app-grid__item-title br")&&this.wrapper.querySelector(".app-grid__item-title br").remove())},n}(),R=function(){function t(){this.components=[]}return t.prototype.init=function(){return t=this,n=void 0,r=function(){var t,n;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(e){for(t=0,n=this.components;t<n.length;t++)n[t].init();return[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},t}(),Y="boards__list-item-name_selected",G=function(){function n(t,n,e){this.el=t,this.parent=n,this.board=e}return n.prototype.init=function(){return t=this,n=void 0,r=function(){return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){return this.el.draggable=!0,this.registerEvents(),[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},n.prototype.registerEvents=function(){var n=this;this.el.addEventListener("click",(function(e){var r;n.parent.querySelectorAll("li").forEach((function(t){return t.classList.remove(Y)})),n.el.classList.add(Y),i(t.BOARD_SELECTED,{boardId:(null===(r=n.board)||void 0===r?void 0:r.id)||n.el.textContent})})),this.el.addEventListener("dragstart",(function(t){return n.handleDrag(t)}))},n.prototype.handleDrag=function(t){var n={name:this.board.name,icon:"",color:v.color(),steps:[{commandId:"my-deck__to-specific",params:{boardId:this.board.id}}]};t.dataTransfer.setData("button",JSON.stringify(n))},n}(),N=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},U=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},H=function(){function n(t){this.numBoards=t,this.init()}return n.prototype.init=function(){return N(this,void 0,void 0,(function(){var t=this;return U(this,(function(n){return _.open({title:"Nuevo tablero",body:this.printForm(),maxWidth:"360px"}),this.form=document.querySelector("#new-board"),this.form.addEventListener("submit",(function(n){return t.onSubmit(n)})),[2]}))}))},n.prototype.printForm=function(){return'<form id="new-board" class="form">\n      <p class="form__line"><input class="form__input" placeholder="Nombre del tablero" name="board_name" /></p>\n      <p class="form__line"><button class="form__submit">Crear</button></p>\n    </form>'},n.prototype.onSubmit=function(t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(e){switch(e.label){case 0:return t.preventDefault(),n=this.form.board_name.value||"Tablero ".concat(this.numBoards),[4,this.addBoard(n)];case 1:return e.sent(),_.doClose(),[2]}}))}))},n.prototype.addBoard=function(n){return N(this,void 0,void 0,(function(){var e;return U(this,(function(r){switch(r.label){case 0:return[4,o.createBoard(n)];case 1:return e=r.sent(),i(t.BOARD_ADDED,{boardId:e.id}),[2]}}))}))},n}(),F=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),W=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},J=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},V=function(n){function e(){var t=n.call(this)||this;return t.list=document.querySelector(".boards__list"),t.addButton=document.querySelector(".boards__add"),t}return F(e,n),e.prototype.init=function(){return W(this,void 0,void 0,(function(){var t=this;return J(this,(function(n){return this.registerEvents(),this.addButton.addEventListener("click",(function(){return t.openCreateDialog()})),this.updateBoards(),[2]}))}))},e.prototype.registerEvents=function(){var n=this;a(t.BOARD_SELECTED,(function(t){return n.currentSelected=t.detail.boardId})),a(t.BOARD_ADDED,(function(e){return W(n,void 0,void 0,(function(){return J(this,(function(n){return this.updateBoards(),i(t.BOARD_SELECTED,{boardId:e.detail.boardId}),[2]}))}))})),a(t.BOARD_UPDATED,(function(t){return n.updateBoards()}))},e.prototype.updateBoards=function(){return W(this,void 0,void 0,(function(){return J(this,(function(t){switch(t.label){case 0:return[4,this.getBoards()];case 1:return t.sent(),[4,n.prototype.init.call(this)];case 2:return t.sent(),[2]}}))}))},e.prototype.getBoards=function(){return W(this,void 0,void 0,(function(){var n,e=this;return J(this,(function(r){switch(r.label){case 0:return this.components=[],[4,o.getBoards()];case 1:return n=r.sent(),this.list.innerHTML=this.printBoards(n),this.list.querySelectorAll("li").forEach((function(t,r){return e.components.push(new G(t,e.list,n[r]))})),this.currentSelected||(this.currentSelected=n[0].id),i(t.BOARD_SELECTED,{boardId:this.currentSelected}),[2]}}))}))},e.prototype.printBoards=function(t){var n=this;return t.map((function(t,e){return'<li class="boards__list-item'.concat(!n.currentSelected&&0===e||t.id===n.currentSelected?" boards__list-item-name_selected":"",'"><span class="boards__list-item-name">').concat(t.name,"</span></li>")})).join("")},e.prototype.openCreateDialog=function(){return W(this,void 0,void 0,(function(){return J(this,(function(t){return new H(this.components.length),[2]}))}))},e}(R),z=function(){return z=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},z.apply(this,arguments)},Q=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},X=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},K=function(){function t(t,n,e){this.el=t,this.parent=n,this.button=e}return t.prototype.init=function(){return Q(this,void 0,void 0,(function(){return X(this,(function(t){return this.el.draggable=!0,this.registerEvents(),[2]}))}))},t.prototype.registerEvents=function(){var t=this;this.el.addEventListener("dragstart",(function(n){return t.handleDrag(n)})),this.el.querySelector(".btns__item-action").addEventListener("click",(function(){return t.handleRemove()}))},t.prototype.handleDrag=function(t){t.dataTransfer.setData("button",JSON.stringify(z(z({},this.button),{id:null})))},t.prototype.handleRemove=function(){return Q(this,void 0,void 0,(function(){return X(this,(function(t){switch(t.label){case 0:return[4,d.deleteButton(this.button.id)];case 1:return t.sent(),i(c.BUTTON_REMOVED),[2]}}))}))},t}(),Z=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}))},tt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},nt=function(t){function n(n,e){var r=t.call(this)||this;return r.el=n,r.parent=e,r.steps=0,r.slider=r.el.querySelector(".btns__list-wrapper"),r.slider.style.left="0px",r.left=r.el.querySelector(".btns__arrow-left"),r.right=r.el.querySelector(".btns__arrow-right"),r}return Z(n,t),n.prototype.init=function(){return $(this,void 0,void 0,(function(){var t=this;return tt(this,(function(n){switch(n.label){case 0:return this.registerEvents(),[4,this.updateButtons()];case 1:return n.sent(),window.addEventListener("resize",(function(){t.reset()})),[2]}}))}))},n.prototype.registerEvents=function(){var t=this;this.left.addEventListener("click",(function(n){t.toRight()})),this.right.addEventListener("click",(function(n){t.toLeft()})),a(c.BUTTON_ADDED,(function(n){return t.updateButtons()})),a(c.BUTTON_REMOVED,(function(n){return t.updateButtons()}))},n.prototype.updateButtons=function(){return $(this,void 0,void 0,(function(){return tt(this,(function(n){switch(n.label){case 0:return[4,this.getButtons()];case 1:return n.sent(),[4,t.prototype.init.call(this)];case 2:return n.sent(),[2]}}))}))},n.prototype.getButtons=function(){return $(this,void 0,void 0,(function(){var t,n=this;return tt(this,(function(e){switch(e.label){case 0:return this.components=[],[4,d.getButtons()];case 1:return t=e.sent(),this.slider.innerHTML=this.printButtons(t),this.slider.querySelectorAll(".btns__item").forEach((function(e,r){return n.components.push(new K(e,n.slider,t[r]))})),this.reset(),this.updateArrowsState(),[2]}}))}))},n.prototype.printButtons=function(t){var n=this;return t.map((function(t){return'<div class="btns__item" '.concat(n.buttonBackground(t),'>\n    <p class="btns__item-name">').concat(t.name,'</p>\n    <div class="btns__item-actions"><div class="btns__item-action">🗑</div></div>\n  </div>')})).join("")},n.prototype.buttonBackground=function(t,n){return void 0===n&&(n="color"),"color"===n?'style="background-color: '.concat(t.color,';"'):"style=\"background-image: url('".concat(t.icon,"');\"")},n.prototype.reset=function(){this.slider.style.left="0px",this.steps=0},Object.defineProperty(n.prototype,"sliderWidth",{get:function(){return this.slider.getBoundingClientRect().width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canMoveToLeft",{get:function(){return this.components.length>1&&this.steps<=this.components.length-1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canMoveToRight",{get:function(){return!!+this.slider.style.left.split("px")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buttonWidth",{get:function(){return this.el.querySelector(".btns__item").getBoundingClientRect().width},enumerable:!1,configurable:!0}),n.prototype.toLeft=function(){var t=+this.slider.style.left.split("px")[0],n=t?0:5;this.steps++,this.canMoveToLeft&&this.moveSlider(t-(this.buttonWidth+5+n)),this.updateArrowsState()},n.prototype.toRight=function(){var t=+this.slider.style.left.split("px")[0],n=1===this.steps?5:0;this.steps--,this.canMoveToRight&&this.moveSlider(this.steps?t+(this.buttonWidth+5+n):0),this.updateArrowsState()},n.prototype.updateArrowsState=function(){this.canMoveToLeft?this.right.disabled=!1:this.right.disabled=!0,this.canMoveToRight?this.left.disabled=!1:this.left.disabled=!0},n.prototype.moveSlider=function(t){this.slider.style.left=t+"px"},n}(l),et=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rt=function(t){function n(){var n=t.call(this)||this;return n.el=document.querySelector(".btns"),n}return et(n,t),n.prototype.init=function(){return n=this,e=void 0,o=function(){return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(n){return this.components.push(new nt(this.el.querySelector(".btns__list-container"),this.el)),t.prototype.init.call(this),[2]}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(n,e||[])).next())}));var n,e,r,o},n}(R),ot=function(){function t(t,n,e){this.el=t,this.parent=n,this.command=e}return t.prototype.init=function(){return t=this,n=void 0,r=function(){return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(t){return this.el.draggable=!0,this.registerEvents(),[2]}))},new((e=void 0)||(e=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}s((r=r.apply(t,n||[])).next())}));var t,n,e,r},t.prototype.registerEvents=function(){var t=this;this.el.addEventListener("dragstart",(function(n){return t.handleDrag(n)}))},t.prototype.handleDrag=function(t){var n={name:this.command.name,icon:this.command.defaultIcon||"",color:this.command.defaultIcon?"":v.color(),steps:[{commandId:this.command.id,params:this.command.defaultParams||{}}]};t.dataTransfer.setData("button",JSON.stringify(n))},t}(),it=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),at=function(t){function n(n,e,r){var o=t.call(this)||this;return o.el=n,o.group=e,o.commands=r,o.childrenParent=n.querySelector(".commads__list-children"),o}return it(n,t),n.prototype.init=function(){return n=this,e=void 0,o=function(){var n=this;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(e){switch(e.label){case 0:return this.childrenParent.innerHTML=this.printCommands(),this.childrenParent.querySelectorAll(".commands__list-item").forEach((function(t,e){return n.components.push(new ot(t,n.childrenParent,n.commands[e]))})),[4,t.prototype.init.call(this)];case 1:return e.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(n,e||[])).next())}));var n,e,r,o},n.prototype.printCommands=function(){return this.commands.map((function(t){return'\n      <p class="commands__list-item"><span class="commands__list-item-name">'.concat(t.name,"</span></p>\n    ")})).join("")},n}(l),ct=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(t){function n(){var n=t.call(this)||this;return n.list=document.querySelector(".commands__list"),n}return ct(n,t),n.prototype.init=function(){return n=this,e=void 0,o=function(){var n,e,r=this;return function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(o){switch(o.label){case 0:return[4,y.getCommandsData()];case 1:return n=o.sent(),e=new Map(n.groups.map((function(t){return[t.id,t.commandsToShow.map((function(e){return n.commands["".concat(t.id,"__").concat(e)]}))]}))),this.list.innerHTML=this.printGroups(n.groups),this.list.querySelectorAll(".commands__list-item.commands__list-item_parent").forEach((function(t,o){return r.components.push(new at(t,n.groups[o],e.get(n.groups[o].id)))})),[4,t.prototype.init.call(this)];case 2:return o.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(t,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(n){var e;n.done?t(n.value):(e=n.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(n,e||[])).next())}));var n,e,r,o},n.prototype.printGroups=function(t){return t.map((function(t){return'<div class="commands__list-item commands__list-item_parent">\n    <p class="commands__list-item-name_parent">'.concat(t.name,'</p>\n    <div class="commads__list-children">\n    </div>\n  </div>')})).join("")},n}(R);window.addEventListener("DOMContentLoaded",(function(t){!function(){for(var t=0,n=[new st,new I,new V,new rt,_];t<n.length;t++){var e=n[t];e&&e.init()}}()}))})();